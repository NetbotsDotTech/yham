import{r as t,aJ as P,j as r,B as C,aB as j,aC as v,T as y}from"./index-C6KZfdT0.js";import{a as b}from"./axios-BWYlR7gC.js";import{Q as B,B as o}from"./ReactToastify-B6NIVgNI.js";import{T as m,F as T}from"./TextField-LRRH-Lw2.js";import{B as E}from"./Button-iNozNWMr.js";import{C as F}from"./CircularProgress-Bl0nTlxR.js";import"./Select-CIAGasw8.js";const N=()=>{const[e,h]=t.useState(""),[l,w]=t.useState(""),[c,u]=t.useState(!1),[a,n]=t.useState(""),g=P(),f=s=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/.test(s),x=async()=>{var s,i;if(n(""),!f(e)){n("Password must be at least 6 characters long, including uppercase, lowercase, number, and special character."),o.error("Password must be at least 6 characters long, including uppercase, lowercase, number, and special character.");return}if(e!==l){n("Passwords do not match!"),o.error("Passwords do not match!");return}u(!0);try{const d=await b.post("http://localhost:5000/api/otp/update-password",{newPassword:e},{withCredentials:!0});o.success("Password updated successfully!"),g("/login")}catch(d){const p=((i=(s=d.response)==null?void 0:s.data)==null?void 0:i.message)||d.message;console.error("Error updating password:",p),o.error(`Failed to update password: ${p}`)}finally{u(!1)}};return r.jsxs(C,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",bgcolor:"#f5f5f5"},children:[r.jsx(j,{sx:{maxWidth:400,width:"100%"},children:r.jsxs(v,{children:[r.jsx(y,{variant:"h5",component:"div",gutterBottom:!0,children:"Update Password"}),r.jsx(m,{fullWidth:!0,type:"password",label:"New Password",variant:"outlined",value:e,onChange:s=>h(s.target.value),margin:"normal",required:!0,error:!!a}),r.jsx(m,{fullWidth:!0,type:"password",label:"Confirm Password",variant:"outlined",value:l,onChange:s=>w(s.target.value),margin:"normal",required:!0,error:!!a}),a&&r.jsx(T,{error:!0,children:a})," ",r.jsx(E,{fullWidth:!0,variant:"contained",color:"primary",onClick:x,disabled:c,sx:{mt:2},children:c?r.jsx(F,{size:24,color:"inherit"}):"Update Password"})]})}),r.jsx(B,{position:"top-right",autoClose:5e3,hideProgressBar:!1})]})};export{N as default};
