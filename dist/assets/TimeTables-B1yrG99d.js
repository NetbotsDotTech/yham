import{r as t,j as e,a2 as N}from"./index-DQyM8D15.js";import{a as v}from"./axios-BWYlR7gC.js";import{e as W,f as A,g as B,c as E,b as a,d as P,D as F,a as L}from"./TableRow-BBpKgfrP.js";import{B as x}from"./Button-C8EuOxGY.js";import{D as O,a as R}from"./DialogContent-Briyx-A9.js";import{T as n}from"./TextField-Bs4gRt8X.js";import"./Select-JRSIgVJu.js";const Q=()=>{const[S,D]=t.useState([]),[k,r]=t.useState(!1),[i,l]=t.useState(""),[o,c]=t.useState(""),[d,h]=t.useState(""),[g,m]=t.useState(""),[w,p]=t.useState(null),[T,j]=t.useState("");t.useEffect(()=>{f()},[]);const f=async()=>{try{const s=await v.get("http://localhost:5000/api/time-table");D(s.data)}catch(s){console.error("Error fetching timetables:",s)}},M=s=>{p(s._id),l(s.day),c(s.openingTime),h(s.closingTime),m(s.note||""),r(!0),j("")},I=async()=>{var b;if(!i||!o||!d){j("Day, Start Time, and End Time are required.");return}const s={day:i,openingTime:o,closingTime:d,note:g};try{const u=await v.post("http://localhost:5000/api/time-table/",s);f(),r(!1),y()}catch(u){console.error("Error saving timetable:",((b=u.response)==null?void 0:b.data)||u.message)}},y=()=>{l(""),c(""),h(""),m(""),p(null)},C=()=>{r(!1),y()};return e.jsxs("div",{children:[e.jsx("h1",{children:"Timetable Management"}),e.jsx(W,{component:N,children:e.jsxs(A,{children:[e.jsx(B,{children:e.jsxs(E,{children:[e.jsx(a,{children:"Day"}),e.jsx(a,{children:"Opening Time"}),e.jsx(a,{children:"Closing Time"}),e.jsx(a,{children:"Note"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(P,{children:S.map(s=>e.jsxs(E,{children:[e.jsx(a,{children:s.day}),e.jsx(a,{children:s.openingTime}),e.jsx(a,{children:s.closingTime}),e.jsx(a,{children:s.note||"-"}),e.jsx(a,{children:e.jsx(x,{variant:"contained",onClick:()=>M(s),children:"Edit"})})]},s._id))})]})}),e.jsxs(O,{open:k,onClose:C,children:[e.jsx(F,{children:w?"Edit Timetable":"Add New Timetable"}),e.jsxs(R,{children:[e.jsx(n,{fullWidth:!0,label:"Day",value:i,onChange:s=>l(s.target.value),margin:"normal"}),e.jsx(n,{fullWidth:!0,type:"time",label:"Opening Time",value:o,onChange:s=>c(s.target.value),margin:"normal",InputLabelProps:{shrink:!0}}),e.jsx(n,{fullWidth:!0,type:"time",label:"Closing Time",value:d,onChange:s=>h(s.target.value),margin:"normal",InputLabelProps:{shrink:!0}}),e.jsx(n,{fullWidth:!0,label:"Note",value:g,onChange:s=>m(s.target.value),margin:"normal"}),T&&e.jsx("p",{style:{color:"red"},children:T})]}),e.jsxs(L,{children:[e.jsx(x,{variant:"outlined",onClick:C,children:"Cancel"}),e.jsx(x,{variant:"contained",onClick:I,children:"Save Changes"})]})]})]})};export{Q as default};
