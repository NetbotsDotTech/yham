import{j as e,r as a,aJ as h,B as r,aB as f,aC as j,T as y,aK as v}from"./index-DQyM8D15.js";import{a as C}from"./axios-BWYlR7gC.js";import{Q as b,B as c}from"./ReactToastify-wdwLQBLg.js";import{T as p}from"./TextField-Bs4gRt8X.js";import{B as w}from"./Button-C8EuOxGY.js";import{C as L}from"./CircularProgress-BHuIrO6_.js";import"./Select-JRSIgVJu.js";const B=()=>e.jsx("div",{style:{position:"fixed",bottom:"10px",right:"10px",backgroundColor:"#fff",padding:"5px 10px",borderRadius:"5px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.1)",zIndex:1e3},children:e.jsxs("p",{style:{margin:0,fontSize:"14px",color:"#333"},children:["Version: ","1.4.0"]})}),S="http://ec2-18-209-160-201.compute-1.amazonaws.com",k=()=>{const[o,u]=a.useState(""),[n,x]=a.useState(""),[i,l]=a.useState(!1),g=h(),m=async()=>{var s,d;l(!0);try{const t=await C.post(`${S}/api/user/login`,{email:o,password:n},{withCredentials:!0});console.log("Login response:",t.data),localStorage.setItem("user",JSON.stringify(t.data)),c.success("Login successful! Redirecting to dashboard..."),g("/dashboard")}catch(t){console.error("Error logging in:",((d=(s=t.response)==null?void 0:s.data)==null?void 0:d.message)||t.message),c.error("Invalid email or password. Please try again.")}finally{l(!1)}};return e.jsxs(r,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",p:2,children:[e.jsx(f,{sx:{width:{xs:"100%",sm:"400px"}},children:e.jsxs(j,{children:[e.jsx(y,{variant:"h5",gutterBottom:!0,children:"Login to YHAM Dashboard"}),e.jsxs(r,{component:"form",noValidate:!0,autoComplete:"off",mt:2,display:"flex",flexDirection:"column",gap:2,children:[e.jsx(p,{label:"Email Address",variant:"outlined",fullWidth:!0,value:o,onChange:s=>u(s.target.value),required:!0}),e.jsx(p,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,value:n,onChange:s=>x(s.target.value),required:!0}),e.jsx(r,{display:"flex",justifyContent:"space-between",alignItems:"center",children:e.jsx(w,{variant:"contained",color:"primary",fullWidth:!0,onClick:m,disabled:i,children:i?e.jsx(L,{size:24,color:"inherit"}):"Login"})})]}),e.jsx(r,{mt:2,textAlign:"center",children:e.jsx(v,{href:"/forgot-password",variant:"body2",underline:"none",children:"Forgot Password?"})})]})}),e.jsx(B,{}),e.jsx(b,{})," "]})};export{k as default};
