import{w as xr,j as e,r as n,R as fr,T as M,x as Te,G as l,B as Q,y as br}from"./index-C6KZfdT0.js";import{a as Se}from"./axios-BWYlR7gC.js";import{R as Xe,u as ar,M as jr,a as zr,b as wr,V as Sr,E as Cr,D as Nr}from"./index-Dn6sthbI.js";import{D as He,a as Ue}from"./DialogContent-0bqJRFp1.js";import{D as Fe,a as nr}from"./TableRow-CtGmd6-t.js";import{B as H}from"./Button-iNozNWMr.js";import{Q as Ze,B as oe}from"./ReactToastify-B6NIVgNI.js";import{T as N}from"./TextField-LRRH-Lw2.js";import{M as yr}from"./Select-CIAGasw8.js";import{M as $e}from"./Tabs-CXVYG0ZQ.js";import"./Alert-BPYdZ63k.js";import"./CircularProgress-Bl0nTlxR.js";const Ye=xr(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_r=({open:a,handleClose:o,artifact:r})=>{const[i,t]=n.useState(!1),[u,p]=n.useState(0),[v,z]=n.useState(!1),[x,b]=n.useState(!1),j=fr.useRef(null),w=c=>{p(c),t(!0)},S=c=>{const y=document.createElement("a");y.href=c,y.download=c.split("/").pop(),y.click()},s=()=>{j.current&&(j.current.play(),b(!0))},g=()=>{j.current&&(j.current.pause(),j.current.currentTime=0,b(!1))},d=r||{};return console.log("artifact Detail in the view modal ",r),e.jsxs(He,{open:a,onClose:o,maxWidth:"lg",fullWidth:!0,sx:{"& .MuiPaper-root":{borderRadius:"10px"}},children:[e.jsxs(Fe,{sx:{backgroundColor:"#f5f5f5",borderBottom:"1px solid #ccc"},children:[e.jsx(M,{variant:"h6",sx:{color:"black"},children:"View Artifact"}),e.jsx(Te,{edge:"end",color:"inherit",onClick:o,"aria-label":"close",sx:{position:"absolute",right:8,top:8},children:e.jsx(Ye,{})})]}),e.jsx(Ue,{sx:{padding:3},children:r?e.jsxs(l,{container:!0,spacing:2,children:[e.jsxs(l,{item:!0,xs:12,sm:6,children:[e.jsx(M,{variant:"h4",sx:{color:"black",mb:2},children:"Details:"}),e.jsx(Q,{children:["name","itemNo","serialNo","description","madeOf","age","shelfNo","hallNo"].map(c=>e.jsxs(M,{variant:"body1",sx:{color:"black",mb:1},children:[e.jsxs("strong",{children:[c.charAt(0).toUpperCase()+c.slice(1),":"]})," ",d[c]||"N/A"]},c))})]}),e.jsxs(l,{item:!0,xs:12,sm:6,children:[e.jsx(M,{variant:"h4",sx:{color:"black",mb:2},children:"Particulars:"}),e.jsx(Q,{children:["width","depth","circumference","diameters","weight"].map(c=>{var y;return e.jsxs(M,{variant:"body1",sx:{color:"black",mb:1},children:[e.jsxs("strong",{children:[c.charAt(0).toUpperCase()+c.slice(1),":"]})," ",((y=d.particulars)==null?void 0:y[c])||"N/A"]},c)})})]}),e.jsxs(l,{item:!0,xs:12,children:[e.jsx(M,{variant:"h4",sx:{color:"black",mb:2},children:"Media:"}),e.jsxs(l,{container:!0,spacing:2,alignItems:"center",children:[d.images&&d.images.length>0&&e.jsxs(l,{item:!0,xs:12,sm:6,children:[e.jsx(M,{variant:"h6",sx:{color:"black",mb:2},children:"Images:"}),e.jsx(Q,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:d.images.map((c,y)=>e.jsx(Q,{sx:{position:"relative",maxWidth:200},children:e.jsx("img",{src:c,alt:`Image ${y+1}`,style:{width:"100%",maxHeight:"150px",cursor:"pointer",borderRadius:"8px"},onClick:()=>w(y)})},y))})]}),d.qrCode&&e.jsxs(l,{item:!0,xs:12,sm:6,children:[e.jsx(M,{variant:"h6",sx:{color:"black",mb:2},children:"QR Code:"}),e.jsx(Q,{sx:{maxWidth:200,mt:1},children:e.jsx("img",{src:d.qrCode,alt:"QR Code",style:{width:"100%",maxHeight:"150px",cursor:"pointer",borderRadius:"8px"},onClick:()=>z(!0)})})]})]})]}),e.jsx(l,{container:!0,spacing:2,sx:{mt:2},children:e.jsxs(l,{item:!0,xs:12,children:[e.jsx(M,{variant:"h6",sx:{color:"black",mb:2},children:"Audio File:"}),e.jsxs(Q,{children:[e.jsx(H,{onClick:x?g:s,variant:"contained",sx:{mr:1},fullWidth:!0,children:x?"Stop":"Play"}),e.jsx("audio",{ref:j,src:d.audio,style:{width:"100%"}})]})]})})]}):e.jsx(M,{variant:"h6",sx:{color:"black"},children:"Loading artifact details..."})}),i&&d.images&&e.jsx(Xe,{mainSrc:d.images[u],nextSrc:d.images[(u+1)%d.images.length],prevSrc:d.images[(u+d.images.length-1)%d.images.length],onCloseRequest:()=>t(!1),onMovePrevRequest:()=>p((u+d.images.length-1)%d.images.length),onMoveNextRequest:()=>p((u+1)%d.images.length),imageTitle:e.jsx(H,{onClick:()=>S(d.images[u]),style:{color:"white",backgroundColor:"black",padding:"6px 12px",margin:"10px",borderRadius:"4px"},children:"Download"}),reactModalStyle:{overlay:{zIndex:2e3,backgroundColor:"rgba(0, 0, 0, 0.85)"},content:{inset:"10%"}}}),v&&d.qrCode&&e.jsx(Xe,{mainSrc:d.qrCode,onCloseRequest:()=>z(!1),imageTitle:e.jsx(H,{onClick:()=>S(d.qrCode),style:{color:"white",backgroundColor:"black",padding:"6px 12px",margin:"10px",borderRadius:"4px"},children:"Download"}),reactModalStyle:{overlay:{zIndex:2e3,backgroundColor:"rgba(0, 0, 0, 0.85)"},content:{inset:"10%"}}})]})};(function(){(a=>{try{if(typeof window>"u")return;var o=document.createElement("style");o.appendChild(document.createTextNode(a)),document.head.appendChild(o)}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})(".voice-visualizer__buttons-container{display:flex;justify-content:center;align-items:center;column-gap:20px;row-gap:15px;flex-wrap:wrap;margin-bottom:40px}.voice-visualizer__btn-center{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#fff;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s}.voice-visualizer__btn-center:disabled{opacity:.85;cursor:default}.voice-visualizer__btn-center:hover{background-color:#eaeaea;border:4px solid #9f9f9f}.voice-visualizer__btn-center>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause{background-color:#ff3030}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause:hover{background-color:#ff4f4f}.voice-visualizer__btn-center.voice-visualizer__btn-center-pause>img{height:50%;max-height:16px}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent{border-color:transparent}.voice-visualizer__btn-center.voice-visualizer__btn-center--border-transparent:hover{background-color:#fff}.voice-visualizer__btn-left{box-sizing:border-box;flex-shrink:0;width:60px;height:60px;padding:0;display:flex;justify-content:center;align-items:center;border-radius:50%;background-color:#ff3030;border:4px solid #c5c5c5;outline:none;cursor:pointer;transition:border-color .3s,background-color .3s,opacity .3s}.voice-visualizer__btn-container{min-width:100px;display:flex;justify-content:flex-end}.voice-visualizer__btn-left:hover{background-color:#ff4f4f}.voice-visualizer__btn-left:disabled{opacity:.6;background-color:#ff3030;cursor:default}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone{background-color:#fff}.voice-visualizer__btn-left.voice-visualizer__btn-left-microphone>img{width:auto;height:50%;max-height:30px}.voice-visualizer__btn-left>img{width:auto;height:50%;max-height:16px}.voice-visualizer__btn-left:hover{border:4px solid #9f9f9f}.voice-visualizer__btn{box-sizing:border-box;min-width:100px;min-height:60px;padding:5px 20px;border-radius:40px;font-size:15px;background-color:#f0f0f0;transition:background-color .3s,opacity .3s}.voice-visualizer__btn:disabled{opacity:.8;background-color:#f0f0f0;cursor:default}.voice-visualizer__btn:hover{background-color:#bebebe}.voice-visualizer__canvas-container{position:relative;width:fit-content;margin:0 auto;overflow:hidden}.voice-visualizer__canvas-container canvas{display:block}.voice-visualizer__canvas-microphone-btn{position:absolute;top:50%;left:50%;width:auto;max-width:12%;min-width:24px;height:50%;max-height:100px;background-color:transparent;border:none;outline:none;transform:translate(-50%,-50%)}.voice-visualizer__canvas-microphone-icon{width:100%;height:100%;will-change:transform;transition:transform .3s}.voice-visualizer__canvas-microphone-btn:hover .voice-visualizer__canvas-microphone-icon{transform:scale(1.03)}.voice-visualizer__canvas-audio-wave-icon{position:absolute;top:50%;left:50%;width:auto;max-width:40%;height:40%;max-height:100px;transform:translate(-118%,-50%) scale(-1)}.voice-visualizer__canvas-audio-wave-icon2{transform:translate(18%,-50%)}.voice-visualizer__canvas-audio-processing{position:absolute;top:50%;left:50%;margin:0;transform:translate(-50%,-50%)}.voice-visualizer__progress-indicator-hovered{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#85858599}.voice-visualizer__progress-indicator-hovered-time{position:absolute;top:3%;left:1px;width:fit-content;margin:0;padding:0 7px;opacity:.8;font-size:12px;border-radius:0 4px 4px 0;background-color:#575757;text-align:left}.voice-visualizer__progress-indicator-hovered-time.voice-visualizer__progress-indicator-hovered-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__progress-indicator{position:absolute;top:0;pointer-events:none;height:100%;width:1px;background-color:#efefef}.voice-visualizer__progress-indicator-time{position:absolute;top:3%;left:1px;width:fit-content;box-sizing:border-box;min-width:37px;margin:0;padding:0 7px;font-size:12px;border-radius:0 4px 4px 0;text-align:left;color:#000;font-weight:500;background-color:#efefef}.voice-visualizer__progress-indicator-time.voice-visualizer__progress-indicator-time-left{left:unset;right:1px;border-radius:4px 0 0 4px}.voice-visualizer__audio-info-container{box-sizing:border-box;height:55px;display:flex;align-items:center;justify-content:center;gap:30px}.voice-visualizer__audio-info-time{margin:15px 0;min-width:38px;text-align:left}.voice-visualizer__visually-hidden{position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:4px solid #c5c5c5;white-space:nowrap;clip-path:inset(100%);clip:rect(0 0 0 0);overflow:hidden}.relative{position:relative}.spinner__wrapper{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:52px;height:52px;display:flex;justify-content:center;align-items:center}.spinner{flex-shrink:0;width:100%;height:100%;border:4px solid rgba(197,197,197,.5);border-radius:50%;border-top-color:#b7b7b7;animation:spin 1s ease-in-out infinite;-webkit-animation:spin 1s ease-in-out infinite}@keyframes spin{to{transform:rotate(360deg)}}@-webkit-keyframes spin{to{transform:rotate(360deg)}}")})();const Ge=({canvas:a,backgroundColor:o})=>{const r=a.height,i=a.width,t=Math.round(i/2),u=a.getContext("2d");return u?(u.clearRect(0,0,i,r),o!=="transparent"&&(u.fillStyle=o,u.fillRect(0,0,i,r)),{context:u,height:r,width:i,halfWidth:t}):null},Pe=({context:a,color:o,rounded:r,x:i,y:t,w:u,h:p})=>{a.fillStyle=o,a.beginPath(),a.roundRect?(a.roundRect(i,t,u,p,r),a.fill()):a.fillRect(i,t,u,p)},Mr=({barsData:a,canvas:o,barWidth:r,gap:i,backgroundColor:t,mainBarColor:u,secondaryBarColor:p,currentAudioTime:v=0,rounded:z,duration:x})=>{const b=Ge({canvas:o,backgroundColor:t});if(!b)return;const{context:j,height:w}=b,S=v/x;a.forEach((s,g)=>{const d=g/a.length,c=S>d;Pe({context:j,color:c?p:u,rounded:z,x:g*(r+i*r),y:w/2-s.max,h:s.max*2,w:r})})};function Ar({context:a,color:o,rounded:r,width:i,height:t,barWidth:u}){Pe({context:a,color:o,rounded:r,x:i/2+u/2,y:t/2-1,h:2,w:i-(i/2+u/2)})}const Ir=({audioData:a,unit:o,index:r,index2:i,canvas:t,isRecordingInProgress:u,isPausedRecording:p,picks:v,backgroundColor:z,barWidth:x,mainBarColor:b,secondaryBarColor:j,rounded:w,animateCurrentPick:S,fullscreen:s})=>{const g=Ge({canvas:t,backgroundColor:z});if(!g)return;const{context:d,height:c,width:y,halfWidth:E}=g;if(a!=null&&a.length&&u){const L=Math.max(...a);if(!p){if(i.current>=x){i.current=0;const R=(c-L/258*c)/c*100,O=(-c+L/258*c*2)/c*100,P=r.current===x?{startY:R,barHeight:O}:null;r.current>=o?r.current=x:r.current+=x,v.length>(s?y:E)/x&&v.pop(),v.unshift(P)}i.current+=1}!s&&Z(),S&&Pe({context:d,rounded:w,color:b,x:s?y:E,y:c-L/258*c,h:-c+L/258*c*2,w:x});let W=(s?y:E)-i.current;v.forEach(R=>{R&&Pe({context:d,color:b,rounded:w,x:W,y:R.startY*c/100>c/2-1?c/2-1:R.startY*c/100,h:R.barHeight*c/100>2?R.barHeight*c/100:2,w:x}),W-=x})}else v.length=0;function Z(){Ar({context:d,color:j,rounded:w,width:y,height:c,barWidth:x})}},or=a=>{const o=Math.floor(a/3600),r=Math.floor(a%3600/60),i=a%60,t=Math.floor((i-Math.floor(i))*1e3);return o>0?`${String(o).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}:${String(t).charAt(0)}`:r>0?`${String(r).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}:${String(t).charAt(0)}`:`${String(Math.floor(i)).padStart(2,"0")}:${String(t).charAt(0)}`},Rr=a=>{const o=Math.floor(a/1e3),r=Math.floor(o/3600),i=Math.floor(o%3600/60),t=o%60;return r>0?`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}:${String(t).padStart(2,"0")}`:`${String(i).padStart(2,"0")}:${String(t).padStart(2,"0")}`};function er(a){if(typeof a=="string"){const o=Number(a);if(!Number.isNaN(o))return`${Math.trunc(o/2)*2}px`}return a}const kr=({bufferData:a,height:o,width:r,barWidth:i,gap:t})=>{const u=r/(i+t*i),p=Math.floor(a.length/u),v=o/2;let z=[],x=0;for(let b=0;b<u;b++){const j=[];let w=0;for(let s=0;s<p&&b*p+s<a.length;s++){const g=a[b*p+s];g>0&&(j.push(g),w++)}const S=j.reduce((s,g)=>s+g,0)/w;S>x&&(x=S),z.push({max:S})}if(v*.95>x*v){const b=v*.95/x;z=z.map(j=>({max:j.max>.01?j.max*b:1}))}return z},Dr=a=>{if(!a)return"";const o=a.match(/audio\/([^;]+)/);return o&&o.length>=2?`.${o[1]}`:""},Lr=a=>{const o=Math.floor(a/3600),r=Math.floor(a%3600/60),i=a%60,t=Math.floor((i-Math.floor(i))*1e3);return o>0?`${String(o).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}}h`:r>0?`${String(r).padStart(2,"0")}:${String(Math.floor(i)).padStart(2,"0")}m`:`${String(Math.floor(i)).padStart(2,"0")}:${String(t).charAt(0)}${String(t).charAt(1)}s`},Er=a=>{onmessage=o=>{postMessage(a(o.data))}};function Pr({fn:a,initialValue:o,onMessageReceived:r}){const[i,t]=n.useState(o);return{result:i,setResult:t,run:u=>{const p=new Worker(URL.createObjectURL(new Blob([`(${Er})(${a})`])));p.onmessage=v=>{v.data&&(t(v.data),r&&r(),p.terminate())},p.onerror=v=>{console.error(v.message),p.terminate()},p.postMessage(u)}}}const Tr=(a,o=250)=>{const r=n.useRef();return n.useCallback((...i)=>{const t=()=>{clearTimeout(r.current),a(...i)};clearTimeout(r.current),r.current=setTimeout(t,o)},[a,o])};function Wr(a){const o=n.useRef(a);return n.useLayoutEffect(()=>{o.current=a},[a]),o}const Or=({color:a="#000000",stroke:o=2,className:r})=>e.jsx("svg",{viewBox:"0 0 23 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,children:e.jsx("path",{d:"M1.1 16.72c0 3 .96 5.8 3.61 7.95a9.96 9.96 0 0 0 6.5 2.17m0 0v4.34h4.34-8.67m4.34-4.34c2.35 0 4.42-.48 6.5-2.17a9.87 9.87 0 0 0 3.61-7.95M11.22 1.82c-1.45 0-2.5.37-3.3.93a5.6 5.6 0 0 0-1.84 2.4c-.9 2.06-1.1 4.77-1.1 7.24 0 2.46.2 5.17 1.1 7.24a5.6 5.6 0 0 0 1.84 2.4c.8.55 1.85.92 3.3.92 1.44 0 2.5-.37 3.29-.93a5.6 5.6 0 0 0 1.84-2.4c.9-2.06 1.1-4.77 1.1-7.23 0-2.47-.2-5.18-1.1-7.24a5.6 5.6 0 0 0-1.84-2.4 5.52 5.52 0 0 0-3.3-.93Z",stroke:a,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round"})}),rr=({color:a="#FFFFFF",reflect:o})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0.92 17.54 48.27 14.92",className:`voice-visualizer__canvas-audio-wave-icon ${o?"voice-visualizer__canvas-audio-wave-icon2":""}`,children:e.jsx("path",{d:"M.92 24.63h.21v.75H.92zm.42-1.39h.21v3.52h-.21zm.43.68h.21v2.17h-.21zM2.2 22h.21v6.01H2.2zm.43-1.27h.21v8.55h-.21zm.43 2.07h.21v4.4h-.21zm.43 1.22h.21v1.97h-.21zm.43.47h.21v1.03h-.21zm.43-1.66h.21v4.35h-.21zm.43-1.74h.21v7.82h-.21zm.43 1.94h.21v3.94h-.21zm.43 1.07h.21v1.81h-.21zm.42-.94h.21v3.68h-.21zm.43.91h.21v1.86h-.21zm.43-.23h.21v2.33h-.21zm.43.46h.21v1.4h-.21zm.43-.7h.21v2.8h-.21zm.43-1.6h.21v6.01h-.21zm.43-2.23h.21v10.46h-.21zm.43-1.4h.21v13.26h-.21zm.43.62h.21v12.02H9.5zm.43 1.64h.21v8.75h-.21zm.43 1.37h.21v6.01h-.21zm.43-1.87H11v9.74h-.21zm.42 1.32h.21v7.1h-.21zm.43-2.64h.21v12.38h-.21zm.43 1.61h.21v9.17h-.21zM12.5 22h.21v6.01h-.21zm.43 1.32h.21v3.37h-.21zm.43-2.51h.21v8.39h-.21zm.43.59H14v7.2h-.21zm.43 1.79h.21v3.62h-.21zm.43.41h.21v2.8h-.21zm.43.57h.21v1.66h-.21zm.43-1.11h.21v3.88h-.21zm.42-2.98h.21v9.84h-.21zm.43 1.06h.21v7.72h-.21zm.43 3.19H17v1.35h-.21zm.86-2.33h.21v6.01h-.21zm-.43 1.4h.21v3.21h-.21zm1.29.15h.21v2.9h-.21zm.43.68h.21v1.55h-.21zm-.86-.76h.21v3.05h-.21zm1.29-.05h.21v3.16h-.21zm.43-.64h.21v4.45h-.21zm.43.38h.21v3.68h-.21zm.42-.49h.21v4.66h-.21zm.43 1.32h.21v2.02h-.21zm.43.37h.21v1.29h-.21zm.43.31h.21v.67h-.21zm.43-.39h.21v1.45h-.21zm.43-1.35h.21v4.14h-.21zm.86.73h.21v2.69h-.21zm-.43.44h.21v1.81h-.21zm1.29-3.45h.21v8.7h-.21zm.43 1.71h.21v5.28h-.21zm-.86-2.3h.21v9.89h-.21zm1.29 3.36h.21v3.16h-.21zM25.8 22h.21v6.01h-.21zm.43 1.42h.21v3.16h-.21zm.43.88h.21v1.4h-.21zm.43-.93h.21v3.26h-.21zm.43-1.37h.21v6.01h-.21zm.43-.93h.21v7.87h-.21zm.43-.76h.21v9.38h-.21zm.43 1.69h.21v6.01h-.21zm.86 1.92h.21v2.17h-.21zm-.43-.6h.21v3.37h-.21zm1.28.05h.21v3.26h-.21zm.43.67h.21v1.91h-.21zm-.85-.51h.21v2.95h-.21zm1.28-.13h.21v3.21h-.21zm.43-1.4h.21v6.01h-.21zm.43-.99h.21v7.98h-.21zm.43 1.77h.21v4.45h-.21zm.43-1.22h.21v6.89h-.21zm.43 1.6h.21v3.68h-.21zm.43-.28h.21v4.25h-.21zm.43-.6h.21v5.44h-.21zm.43-.28h.21v6.01h-.21zm.85 2.02h.21v1.97h-.21zm-.43-.57h.21v3.11h-.21zm1.29.93h.21v1.24h-.21zm.43-.65h.21v2.54h-.21zm-.86-.28h.21v3.11h-.21zm1.29.83h.21v1.45h-.21zm.43-.99h.21v3.42h-.21zm.43-.1h.21v3.62h-.21zm.43-.7h.21v5.02h-.21zm.43.8h.21v3.42h-.21zm.43-1.29h.21v6.01h-.21zm.42-1.71h.21v9.43h-.21zm.43 2.38h.21v4.66h-.21zm.43.65h.21v3.37h-.21zm.86.08h.21v3.21h-.21zm-.43.54h.21v2.12h-.21zm1.29-.05h.21v2.23h-.21zm.43.28h.21v1.66h-.21zm-.86.16h.21v1.35h-.21zm1.29.21h.21v.93h-.21zm.43-6.04h.21v13h-.21zm.43.8h.21v11.4h-.21zm.43-1.76h.21v14.92h-.21zm.42 1.09h.21v12.74h-.21zm.43 1.17h.21v10.41h-.21zm.43 1.32h.21v7.77h-.21zm.43 1.6h.21v4.56h-.21zm.43 1.17h.21v2.23h-.21zm.86-.08h.21v2.38h-.21zm-.43-.34h.21v3.05h-.21zm1.29-.1h.21v3.26h-.21zm.43.93h.21v1.4h-.21zm-.86-.02h.21v1.45h-.21z",fill:a})}),tr="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjMiIGhlaWdodD0iMzMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTEuMSAxNi43MmMwIDMgLjk2IDUuOCAzLjYxIDcuOTVhOS45NiA5Ljk2IDAgMCAwIDYuNSAyLjE3bTAgMHY0LjM0aDQuMzQtOC42N200LjM0LTQuMzRjMi4zNSAwIDQuNDItLjQ4IDYuNS0yLjE3YTkuODcgOS44NyAwIDAgMCAzLjYxLTcuOTVNMTEuMjIgMS44MmMtMS40NSAwLTIuNS4zNy0zLjMuOTNhNS42IDUuNiAwIDAgMC0xLjg0IDIuNGMtLjkgMi4wNi0xLjEgNC43Ny0xLjEgNy4yNCAwIDIuNDYuMiA1LjE3IDEuMSA3LjI0YTUuNiA1LjYgMCAwIDAgMS44NCAyLjRjLjguNTUgMS44NS45MiAzLjMuOTIgMS40NCAwIDIuNS0uMzcgMy4yOS0uOTNhNS42IDUuNiAwIDAgMCAxLjg0LTIuNGMuOS0yLjA2IDEuMS00Ljc3IDEuMS03LjIzIDAtMi40Ny0uMi01LjE4LTEuMS03LjI0YTUuNiA1LjYgMCAwIDAtMS44NC0yLjQgNS41MiA1LjUyIDAgMCAwLTMuMy0uOTNaIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",Br="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE4Ljc1IDYuMTZjNC4zMSAyLjYgNi40NiAzLjkgNi40NiA1Ljg0IDAgMS45NS0yLjE1IDMuMjQtNi40NiA1Ljg0bC00Ljg0IDIuOTJjLTQuMzEgMi42LTYuNDYgMy44OS04LjA4IDIuOTItMS42Mi0uOTgtMS42Mi0zLjU3LTEuNjItOC43NlY5LjA4YzAtNS4xOSAwLTcuNzggMS42Mi04Ljc2IDEuNjItLjk3IDMuNzcuMzMgOC4wOCAyLjkybDQuODQgMi45MloiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",ir="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjkiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTE0IDMuNWEzLjUgMy41IDAgMSAxIDcgMHYyMmEzLjUgMy41IDAgMSAxLTcgMHYtMjJaIiBmaWxsPSIjZmZmIi8+CiAgPHJlY3Qgd2lkdGg9IjciIGhlaWdodD0iMjkiIHJ4PSIzLjUiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",$r="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjciIGhlaWdodD0iMjUiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHJlY3QgeD0iLjIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjUiIHJ4PSI1IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo=",sr=({controls:{audioRef:a,audioData:o,isRecordingInProgress:r,recordedBlob:i,duration:t,currentAudioTime:u,audioSrc:p,bufferFromRecordedBlob:v,togglePauseResume:z,startRecording:x,stopRecording:b,saveAudioFile:j,isAvailableRecordedAudio:w,isPausedRecordedAudio:S,isPausedRecording:s,isProcessingStartRecording:g,isProcessingRecordedAudio:d,isCleared:c,formattedDuration:y,formattedRecordingTime:E,formattedRecordedAudioCurrentTime:Z,clearCanvas:L,setCurrentAudioTime:W,isProcessingOnResize:R,_setIsProcessingOnResize:O,_setIsProcessingAudioOnComplete:P},width:U="100%",height:h=200,speed:f=3,backgroundColor:k="transparent",mainBarColor:D="#FFFFFF",secondaryBarColor:X="#5e5e5e",barWidth:ge=2,gap:ee=1,rounded:G=5,isControlPanelShown:re=!0,isDownloadAudioButtonShown:se=!1,animateCurrentPick:pe=!0,fullscreen:ve=!1,onlyRecording:te=!1,isDefaultUIShown:Ce=!0,defaultMicrophoneIconColor:Ne=D,defaultAudioWaveIconColor:le=D,mainContainerClassName:ce,canvasContainerClassName:ye,isProgressIndicatorShown:de=!te,progressIndicatorClassName:I,isProgressIndicatorTimeShown:q=!0,progressIndicatorTimeClassName:ie,isProgressIndicatorOnHoverShown:ue=!te,progressIndicatorOnHoverClassName:ae,isProgressIndicatorTimeOnHoverShown:F=!0,progressIndicatorTimeOnHoverClassName:Y,isAudioProcessingTextShown:C=!0,audioProcessingTextClassName:_e,controlButtonsClassName:Me})=>{const[xe,We]=n.useState(0),[B,Ae]=n.useState(0),[he,Oe]=n.useState(0),[fe,be]=n.useState(0),[V,je]=n.useState(!1),[Ie,Re]=n.useState(window.innerWidth),[K,ke]=n.useState(!1),De=Ie<768,J=Math.trunc(f),me=Math.trunc(ee),m=Math.trunc(De&&me>0?ge+1:ge),A=m+me*m,_=n.useRef(null),$=n.useRef([]),Le=n.useRef(J),cr=n.useRef(m),dr=n.useRef(m),ze=n.useRef(null),ur=Wr(Ie),{result:Ee,setResult:hr,run:mr}=Pr({fn:kr,initialValue:[],onMessageReceived:pr}),gr=Tr(Be);n.useEffect(()=>{Be();const T=()=>{ur.current!==window.innerWidth&&(w?(Re(window.innerWidth),O(!0),ke(!0),gr()):(Re(window.innerWidth),Be()))};return window.addEventListener("resize",T),()=>{window.removeEventListener("resize",T)}},[U,w]),n.useLayoutEffect(()=>{_.current&&((Le.current>=J||!o.length)&&(Le.current=o.length?0:J,Ir({audioData:o,unit:A,index:cr,index2:dr,canvas:_.current,picks:$.current,isRecordingInProgress:r,isPausedRecording:s,backgroundColor:k,mainBarColor:D,secondaryBarColor:X,barWidth:m,rounded:G,animateCurrentPick:pe,fullscreen:ve})),Le.current+=1)},[_.current,o,m,k,D,X,G,ve,Ce,fe]),n.useEffect(()=>{var T,ne;if(w)return V?(T=_.current)==null||T.addEventListener("mouseleave",Qe):(ne=_.current)==null||ne.addEventListener("mouseenter",qe),()=>{var we,Je;V?(we=_.current)==null||we.removeEventListener("mouseleave",Qe):(Je=_.current)==null||Je.removeEventListener("mouseenter",qe)}},[V,w]),n.useEffect(()=>{var T;if(!v||!_.current||r||K)return;if(te){L();return}$.current=[];const ne=v.getChannelData(0);return mr({bufferData:ne,height:he,width:fe,barWidth:m,gap:me}),(T=_.current)==null||T.addEventListener("mousemove",Ve),()=>{var we;(we=_.current)==null||we.removeEventListener("mousemove",Ve)}},[v,B,he,ee,ge,K]),n.useEffect(()=>{if(!(te||!(Ee!=null&&Ee.length)||!_.current||d)){if(c){hr([]);return}Mr({barsData:Ee,canvas:_.current,barWidth:m,gap:me,backgroundColor:k,mainBarColor:D,secondaryBarColor:X,currentAudioTime:u,rounded:G,duration:t})}},[Ee,u,c,G,k,D,X]),n.useEffect(()=>{d&&_.current&&Ge({canvas:_.current,backgroundColor:k})},[d]);function Be(){if(!ze.current||!_.current)return;Le.current=J;const T=Math.trunc(ze.current.clientHeight*window.devicePixelRatio/2)*2;Ae(ze.current.clientWidth),Oe(T),be(Math.round(ze.current.clientWidth*window.devicePixelRatio)),ke(!1)}function pr(){O(!1),P(!1),a!=null&&a.current&&!R&&(a.current.src=p)}const qe=()=>{je(!0)},Qe=()=>{je(!1)},Ve=T=>{We(T.offsetX)},vr=T=>{if(a!=null&&a.current&&_.current){const ne=t/B*(T.clientX-_.current.getBoundingClientRect().left);a.current.currentTime=ne,W(ne)}},Ke=u/t*B;return e.jsxs("div",{className:`voice-visualizer ${ce??""}`,children:[e.jsxs("div",{className:`voice-visualizer__canvas-container ${ye??""}`,ref:ze,style:{width:er(U)},children:[e.jsx("canvas",{ref:_,width:fe,height:he,onClick:vr,style:{height:er(h),width:B},children:"Your browser does not support HTML5 Canvas."}),Ce&&c&&e.jsxs(e.Fragment,{children:[e.jsx(rr,{color:le}),e.jsx(rr,{color:le,reflect:!0}),e.jsx("button",{onClick:x,className:"voice-visualizer__canvas-microphone-btn",children:e.jsx(Or,{color:Ne,stroke:.5,className:"voice-visualizer__canvas-microphone-icon"})})]}),C&&d&&e.jsx("p",{className:`voice-visualizer__canvas-audio-processing ${_e??""}`,style:{color:D},children:"Processing Audio..."}),V&&w&&!d&&!De&&ue&&e.jsx("div",{className:`voice-visualizer__progress-indicator-hovered ${ae??""}`,style:{left:xe},children:F&&e.jsx("p",{className:`voice-visualizer__progress-indicator-hovered-time 
                    ${B-xe<70?"voice-visualizer__progress-indicator-hovered-time-left":""} 
                    ${Y??""}`,children:or(t/B*xe)})}),de&&w&&!d&&t?e.jsx("div",{className:`voice-visualizer__progress-indicator ${I??""}`,style:{left:Ke<B-1?Ke:B-1},children:q&&e.jsx("p",{className:`voice-visualizer__progress-indicator-time ${B-u*B/t<70?"voice-visualizer__progress-indicator-time-left":""} ${ie??""}`,children:Z})}):null]}),re&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"voice-visualizer__audio-info-container",children:[r&&e.jsx("p",{className:"voice-visualizer__audio-info-time",children:E}),t&&!d?e.jsx("p",{children:y}):null]}),e.jsxs("div",{className:"voice-visualizer__buttons-container",children:[r&&e.jsx("div",{className:"voice-visualizer__btn-container",children:e.jsx("button",{className:`voice-visualizer__btn-left ${s?"voice-visualizer__btn-left-microphone":""}`,onClick:z,children:e.jsx("img",{src:s?tr:ir,alt:s?"Play":"Pause"})})}),!c&&e.jsx("button",{className:`voice-visualizer__btn-left ${r||g?"voice-visualizer__visually-hidden":""}`,onClick:z,disabled:d,children:e.jsx("img",{src:S?Br:ir,alt:S?"Play":"Pause"})}),c&&e.jsxs("button",{className:`voice-visualizer__btn-center relative ${g?"voice-visualizer__btn-center--border-transparent":""}`,onClick:x,disabled:g,children:[g&&e.jsx("div",{className:"spinner__wrapper",children:e.jsx("div",{className:"spinner"})}),e.jsx("img",{src:tr,alt:"Microphone"})]}),e.jsx("button",{className:`voice-visualizer__btn-center voice-visualizer__btn-center-pause ${r?"":"voice-visualizer__visually-hidden"}`,onClick:b,children:e.jsx("img",{src:$r,alt:"Stop"})}),!c&&e.jsx("button",{onClick:L,className:`voice-visualizer__btn ${Me??""}`,disabled:d,children:"Clear"}),se&&i&&e.jsx("button",{onClick:j,className:`voice-visualizer__btn ${Me??""}`,disabled:d,children:"Download Audio"})]})]})]})};function lr({onStartRecording:a,onStopRecording:o,onPausedRecording:r,onResumedRecording:i,onClearCanvas:t,onEndAudioPlayback:u,onStartAudioPlayback:p,onPausedAudioPlayback:v,onResumedAudioPlayback:z,onErrorPlayingAudio:x}={}){const[b,j]=n.useState(!1),[w,S]=n.useState(!1),[s,g]=n.useState(null),[d,c]=n.useState(new Uint8Array(0)),[y,E]=n.useState(!1),[Z,L]=n.useState(null),[W,R]=n.useState(null),[O,P]=n.useState(0),[U,h]=n.useState(0),[f,k]=n.useState(0),[D,X]=n.useState(""),[ge,ee]=n.useState(!0),[G,re]=n.useState(0),[se,pe]=n.useState(!0),[ve,te]=n.useState(!1),[Ce,Ne]=n.useState(!1),[le,ce]=n.useState(null),[ye,de]=n.useState(!1),I=n.useRef(null),q=n.useRef(null),ie=n.useRef(null),ue=n.useRef(null),ae=n.useRef(null),F=n.useRef(null),Y=n.useRef(null),C=n.useRef(null),_e=!!(W&&!y),Me=Lr(f),xe=Rr(O),We=or(G),B=ve||y;n.useEffect(()=>{if(!b||w)return;const m=setInterval(()=>{const A=performance.now();P(_=>_+(A-U)),h(A)},1e3);return()=>clearInterval(m)},[U,w,b]),n.useEffect(()=>{if(le){K();return}},[le]),n.useEffect(()=>()=>{K()},[]),n.useEffect(()=>(se||window.addEventListener("beforeunload",Ae),()=>{window.removeEventListener("beforeunload",Ae)}),[se]);const Ae=m=>{m.preventDefault(),m.returnValue=""},he=async m=>{if(m)try{if(m.size===0)throw new Error("Error: The audio blob is empty");const A=URL.createObjectURL(m);X(A);const _=await m.arrayBuffer(),$=await new AudioContext().decodeAudioData(_);R($),k($.duration-.06),ce(null)}catch(A){console.error("Error processing the audio blob:",A),ce(A instanceof Error?A:new Error("Error processing the audio blob"))}},Oe=m=>{m instanceof Blob&&(K(),Ne(!0),pe(!1),E(!0),j(!1),P(0),S(!1),C.current=new Audio,L(m),he(m))},fe=()=>{de(!0),navigator.mediaDevices.getUserMedia({audio:!0}).then(m=>{pe(!1),de(!1),j(!0),h(performance.now()),g(m),q.current=new window.AudioContext,ie.current=q.current.createAnalyser(),ue.current=new Uint8Array(ie.current.frequencyBinCount),ae.current=q.current.createMediaStreamSource(m),ae.current.connect(ie.current),I.current=new MediaRecorder(m),I.current.addEventListener("dataavailable",V),I.current.start(),a&&a(),be()}).catch(m=>{de(!1),ce(m instanceof Error?m:new Error("Error starting audio recording"))})},be=()=>{ie.current.getByteTimeDomainData(ue.current),c(new Uint8Array(ue.current)),F.current=requestAnimationFrame(be)},V=m=>{I.current&&(I.current=null,C.current=new Audio,L(m.data),he(m.data))},je=()=>{C.current&&(re(C.current.currentTime),Y.current=requestAnimationFrame(je))},Ie=()=>{b||ye||(se||K(),fe())},Re=()=>{b&&(j(!1),I.current&&(I.current.stop(),I.current.removeEventListener("dataavailable",V)),s==null||s.getTracks().forEach(m=>m.stop()),F.current&&cancelAnimationFrame(F.current),ae.current&&ae.current.disconnect(),q.current&&q.current.state!=="closed"&&q.current.close(),E(!0),P(0),S(!1),o&&o())},K=()=>{F.current&&(cancelAnimationFrame(F.current),F.current=null),Y.current&&(cancelAnimationFrame(Y.current),Y.current=null),I.current&&(I.current.removeEventListener("dataavailable",V),I.current.stop(),I.current=null),s==null||s.getTracks().forEach(m=>m.stop()),C!=null&&C.current&&(C.current.removeEventListener("ended",J),C.current.pause(),C.current.src="",C.current=null),q.current=null,ie.current=null,ue.current=null,ae.current=null,g(null),de(!1),j(!1),Ne(!1),E(!1),L(null),R(null),P(0),h(0),k(0),X(""),re(0),ee(!0),S(!1),te(!1),c(new Uint8Array(0)),ce(null),pe(!0),t&&t()},ke=()=>{if(C.current&&C.current.paused){const m=C.current.play();m!==void 0&&m.catch(A=>{console.error(A),x&&x(A instanceof Error?A:new Error("Error playing audio"))})}},De=()=>{var m,A,_;if(b){S($=>!$),((m=I.current)==null?void 0:m.state)==="recording"?((A=I.current)==null||A.pause(),P($=>$+(performance.now()-U)),F.current&&cancelAnimationFrame(F.current),r&&r()):(F.current=requestAnimationFrame(be),(_=I.current)==null||_.resume(),h(performance.now()),i&&i());return}if(C.current&&_e)if(C.current.paused)requestAnimationFrame(je),ke(),C.current.addEventListener("ended",J),ee(!1),p&&G===0&&p(),z&&G!==0&&z();else{Y.current&&cancelAnimationFrame(Y.current),C.current.removeEventListener("ended",J),C.current.pause(),ee(!0);const $=C.current.currentTime;re($),C.current.currentTime=$,v&&v()}},J=()=>{Y.current&&cancelAnimationFrame(Y.current),ee(!0),C!=null&&C.current&&(C.current.currentTime=0,re(0),u&&u())},me=()=>{var m;if(!D)return;const A=document.createElement("a");A.href=D,A.download=`recorded_audio${Dr((m=I.current)==null?void 0:m.mimeType)}`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(D)};return{audioRef:C,isRecordingInProgress:b,isPausedRecording:w,audioData:d,recordingTime:O,isProcessingRecordedAudio:B,recordedBlob:Z,mediaRecorder:I.current,duration:f,currentAudioTime:G,audioSrc:D,isPausedRecordedAudio:ge,bufferFromRecordedBlob:W,isCleared:se,isAvailableRecordedAudio:_e,formattedDuration:Me,formattedRecordingTime:xe,formattedRecordedAudioCurrentTime:We,startRecording:Ie,togglePauseResume:De,stopRecording:Re,saveAudioFile:me,clearCanvas:K,setCurrentAudioTime:re,error:le,isProcessingOnResize:ve,isProcessingStartRecording:ye,isPreloadedBlob:Ce,setPreloadedAudioBlob:Oe,_setIsProcessingAudioOnComplete:E,_setIsProcessingOnResize:te}}const Hr=({audio:a,onAudioStop:o,onAudioSave:r})=>{const i=lr(),[t,u]=n.useState(!1),p=()=>{i.startRecording(),u(!0)},v=()=>{i.stopRecording(),u(!1),i.recordedBlob&&o(i.recordedBlob)},z=()=>{if(i.recordedBlob){const x=new Blob([i.recordedBlob],{type:"audio/aac"});r(x)}};return e.jsx(Q,{p:2,children:e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(H,{variant:"contained",color:t?"secondary":"primary",onClick:t?v:p,fullWidth:!0,children:t?"Stop Recording":"Start Recording"})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(sr,{controls:i,height:200,width:"100%",backgroundColor:"#f5f5f5",mainBarColor:"#1976d2",secondaryBarColor:"#e3f2fd",speed:2,barWidth:3,gap:2,rounded:4,isControlPanelShown:!1})}),t&&e.jsx(l,{item:!0,xs:12,children:e.jsx(M,{variant:"body2",color:"textSecondary",children:"Recording in progress..."})}),i.recordedBlob&&e.jsxs(l,{item:!0,xs:12,children:[e.jsxs(M,{variant:"body1",children:["Duration: ",i.formattedDuration]}),e.jsx("audio",{controls:!0,src:URL.createObjectURL(i.recordedBlob),style:{width:"100%",marginBottom:"10px"}}),e.jsx(H,{variant:"contained",color:"primary",onClick:z,sx:{mt:2},children:"Save"})]})]})})};function Ur({open:a,handleClose:o}){var c,y,E,Z,L,W,R,O,P,U;const[r,i]=n.useState({name:"",itemNo:"",serialNo:"",description:"",madeOf:"",age:"",shelfNo:"",hallNo:"",particulars:{width:"",depth:"",circumference:"",diameters:"",weight:""},images:[],audio:null}),[t,u]=n.useState({}),[p,v]=n.useState(!1),z=()=>{let h={};return h.name=r.name?"":"Name is required.",h.itemNo=r.itemNo?"":"Item No is required.",h.serialNo=r.serialNo?"":"Serial No is required.",h.description=r.description?"":"Description is required.",h.madeOf=r.madeOf?"":"Material (Made Of) is required.",h.shelfNo=r.shelfNo?"":"Shelf No is required.",h.hallNo=r.hallNo?"":"Hall No is required.",h.images=r.images.length>0?"":"At least one image is required.",Object.keys(r.particulars).forEach(f=>{r.particulars[f]&&isNaN(r.particulars[f])&&(h.particulars={...h.particulars,[f]:"Must be a number"})}),u(h),Object.values(h).every(f=>f==="")},x=h=>{const{name:f,value:k}=h.target;i(D=>({...D,[f]:k}))},b=h=>{const{name:f,value:k}=h.target;i(D=>({...D,particulars:{...D.particulars,[f]:k}}))},j=h=>{i(f=>({...f,images:h}))},w=h=>{i(f=>({...f,audio:h}))},S=h=>{i(f=>({...f,audio:h}))},s=async()=>{if(!z())return;v(!0);const h=new FormData;Object.keys(r).forEach(f=>{f==="particulars"?Object.keys(r.particulars).forEach(k=>{h.append(`particulars[${k}]`,r.particulars[k])}):f==="images"?r.images.forEach(k=>{h.append("images",k)}):f==="audio"&&r.audio?h.append("audio",r.audio,`recording-${Date.now()}.wav`):h.append(f,r[f])});try{await Se.post("http://localhost:5000/api/artifacts",h,{headers:{"Content-Type":"multipart/form-data"}}),oe.success("Artifact added successfully!"),o()}catch{oe.error("Failed to add artifact. Please try again.")}finally{v(!1)}},{getRootProps:g,getInputProps:d}=ar({accept:"image/*",multiple:!0,onDrop:j});return e.jsxs(e.Fragment,{children:[e.jsxs(He,{open:a,onClose:o,maxWidth:"lg",fullWidth:!0,PaperProps:{style:{width:"90%",height:"95%",maxWidth:"none",maxHeight:"none",margin:"20px"}},children:[e.jsxs(Fe,{children:[e.jsx(M,{variant:"h6",children:"Add New Artifact"}),e.jsx(Te,{edge:"end",color:"inherit",onClick:o,"aria-label":"close",sx:{position:"absolute",right:8,top:8},children:e.jsx(Ye,{})})]}),e.jsx(Ue,{dividers:!0,sx:{height:"calc(95% - 64px)",overflowY:"auto"},children:e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Name",name:"name",value:r.name,onChange:x,margin:"normal",variant:"outlined",error:!!t.name,helperText:t.name})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Item No",name:"itemNo",value:r.itemNo,onChange:x,margin:"normal",variant:"outlined",error:!!t.itemNo,helperText:t.itemNo})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Serial No",name:"serialNo",value:r.serialNo,onChange:x,margin:"normal",variant:"outlined",error:!!t.serialNo,helperText:t.serialNo})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Description",name:"description",value:r.description,onChange:x,margin:"normal",variant:"outlined",error:!!t.description,helperText:t.description})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Made Of",name:"madeOf",value:r.madeOf,onChange:x,margin:"normal",variant:"outlined",error:!!t.madeOf,helperText:t.madeOf})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Age",name:"age",value:r.age,onChange:x,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Shelf No",name:"shelfNo",value:r.shelfNo,onChange:x,margin:"normal",variant:"outlined",error:!!t.shelfNo,helperText:t.shelfNo})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Hall No",name:"hallNo",value:r.hallNo,onChange:x,margin:"normal",variant:"outlined",error:!!t.hallNo,helperText:t.hallNo})}),e.jsxs(l,{item:!0,xs:12,children:[e.jsx(M,{variant:"h6",sx:{mb:2},children:"Particulars:"}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Width",name:"width",value:r.particulars.width,onChange:b,margin:"normal",variant:"outlined",error:!!((c=t.particulars)!=null&&c.width),helperText:(y=t.particulars)==null?void 0:y.width})}),e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Depth",name:"depth",value:r.particulars.depth,onChange:b,margin:"normal",variant:"outlined",error:!!((E=t.particulars)!=null&&E.depth),helperText:(Z=t.particulars)==null?void 0:Z.depth})}),e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Circumference",name:"circumference",value:r.particulars.circumference,onChange:b,margin:"normal",variant:"outlined",error:!!((L=t.particulars)!=null&&L.circumference),helperText:(W=t.particulars)==null?void 0:W.circumference})}),e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Diameters",name:"diameters",value:r.particulars.diameters,onChange:b,margin:"normal",variant:"outlined",error:!!((R=t.particulars)!=null&&R.diameters),helperText:(O=t.particulars)==null?void 0:O.diameters})}),e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Weight",name:"weight",value:r.particulars.weight,onChange:b,margin:"normal",variant:"outlined",error:!!((P=t.particulars)!=null&&P.weight),helperText:(U=t.particulars)==null?void 0:U.weight})})]})]}),e.jsxs(l,{item:!0,xs:12,children:[e.jsx(M,{variant:"h6",sx:{mb:2},children:"Upload Images"}),e.jsxs("div",{...g({className:"dropzone"}),style:{padding:"10px",border:"2px dashed #ccc",borderRadius:"8px",textAlign:"center",marginBottom:"20px"},children:[e.jsx("input",{...d()}),e.jsx(M,{variant:"body1",children:"Drag & drop some images here, or click to select images"})]}),e.jsx(l,{container:!0,spacing:2,children:r.images.map((h,f)=>e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx("img",{src:URL.createObjectURL(h),alt:`uploaded-img-${f}`,style:{width:"100%",maxHeight:"200px",objectFit:"cover",borderRadius:"8px"}})},f))})]}),e.jsxs(l,{item:!0,xs:12,children:[e.jsx(M,{variant:"h6",sx:{mb:2},children:"Record Audio"}),e.jsx(Hr,{audio:r.audio,onAudioStop:w,onAudioSave:S})]})]})}),p&&e.jsx(br,{})," ",e.jsxs(nr,{children:[e.jsx(H,{onClick:o,color:"primary",variant:"contained",children:"Cancel"}),e.jsx(H,{onClick:s,color:"primary",variant:"contained",disabled:p,children:"Save"})]})]}),e.jsx(Ze,{})]})}const Fr=({audio:a,onAudioStop:o,onAudioSave:r})=>{const i=lr(),[t,u]=n.useState(!1),p=()=>{i.startRecording(),u(!0)},v=()=>{i.stopRecording(),u(!1),i.recordedBlob&&o(i.recordedBlob)},z=()=>{i.recordedBlob&&r(i.recordedBlob)};return n.useEffect(()=>{i.recordedBlob},[i.recordedBlob]),e.jsx(Q,{p:2,children:e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(H,{variant:"contained",color:t?"secondary":"primary",onClick:t?v:p,fullWidth:!0,children:t?"Stop Recording":"Start Recording"})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(sr,{controls:i,height:200,width:"100%",backgroundColor:"#f5f5f5",mainBarColor:"#1976d2",secondaryBarColor:"#e3f2fd",speed:2,barWidth:3,gap:2,rounded:4,isControlPanelShown:!1})}),t&&e.jsx(l,{item:!0,xs:12,children:e.jsx(M,{variant:"body2",color:"textSecondary",children:"Recording in progress..."})}),i.recordedBlob&&e.jsxs(l,{item:!0,xs:12,children:[e.jsxs(M,{variant:"body1",children:["Duration: ",i.formattedDuration]}),e.jsx("audio",{controls:!0,src:URL.createObjectURL(i.recordedBlob),style:{width:"100%",marginBottom:"10px"}}),e.jsx(H,{variant:"contained",color:"primary",onClick:z,sx:{mt:2},children:"Save"})]})]})})};function Zr({open:a,handleClose:o,artifact:r,onSave:i}){const[t,u]=n.useState({name:"",itemNo:"",serialNo:"",description:"",madeOf:"",age:"",shelfNo:"",hallNo:"",particulars:{width:"",depth:"",circumference:"",diameters:"",weight:""},images:[],audio:null});n.useEffect(()=>{r&&u({name:r.name||"",itemNo:r.itemNo||"",serialNo:r.serialNo||"",description:r.description||"",madeOf:r.madeOf||"",age:r.age||"",shelfNo:r.shelfNo||"",hallNo:r.hallNo||"",particulars:r.particulars||{width:"",depth:"",circumference:"",diameters:"",weight:""},images:r.images||[],audio:r.audio||null})},[r]);const p=s=>{const{name:g,value:d}=s.target;u(c=>({...c,[g]:d}))},v=s=>{const{name:g,value:d}=s.target;u(c=>({...c,particulars:{...c.particulars,[g]:d}}))},z=s=>{u(g=>({...g,images:s}))},x=s=>{u(g=>({...g,audio:s}))},b=s=>{u(g=>({...g,audio:s}))},{getRootProps:j,getInputProps:w}=ar({accept:"image/*",multiple:!0,onDrop:z}),S=async()=>{const s=new FormData;s.append("name",t.name),s.append("itemNo",t.itemNo),s.append("serialNo",t.serialNo),s.append("description",t.description),s.append("madeOf",t.madeOf),s.append("age",t.age),s.append("shelfNo",t.shelfNo),s.append("hallNo",t.hallNo),Object.keys(t.particulars).forEach(g=>{s.append(`particulars[${g}]`,t.particulars[g])}),t.images.length>0?t.images.forEach((g,d)=>{s.append(`images[${d}]`,g)}):s.append("images","[]"),t.audio?s.append("audio",t.audio):s.append("audio","");try{await Se.put(`http://localhost:5000/api/artifacts/${r._id}`,s,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{console.log("formToSubmit",s),oe.success("Artifact updated successfully!"),i(),o()})}catch(g){console.error("Failed to update the artifact:",g),oe.error("Failed to update the artifact. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(Ze,{}),e.jsxs(He,{open:a,onClose:o,maxWidth:"lg",fullWidth:!0,PaperProps:{style:{width:"90%",height:"95%",maxWidth:"none",maxHeight:"none"}},children:[e.jsxs(Fe,{children:[e.jsx(M,{variant:"h6",children:"Edit Artifact"}),e.jsx(Te,{edge:"end",color:"inherit",onClick:o,"aria-label":"close",sx:{position:"absolute",right:8,top:8},children:e.jsx(Ye,{})})]}),e.jsx(Ue,{dividers:!0,sx:{height:"calc(95% - 64px)",overflowY:"auto"},children:e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Name",name:"name",value:t.name,onChange:p,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Item No",name:"itemNo",value:t.itemNo,onChange:p,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Serial No",name:"serialNo",value:t.serialNo,onChange:p,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Description",name:"description",value:t.description,onChange:p,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Made Of",name:"madeOf",value:t.madeOf,onChange:p,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Age",name:"age",value:t.age,onChange:p,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Shelf No",name:"shelfNo",value:t.shelfNo,onChange:p,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:4,children:e.jsx(N,{fullWidth:!0,label:"Hall No",name:"hallNo",value:t.hallNo,onChange:p,margin:"normal",variant:"outlined"})}),e.jsxs(l,{item:!0,xs:12,children:[e.jsx(M,{variant:"h6",sx:{mb:2},children:"Particulars:"}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Width",name:"width",value:t.particulars.width,onChange:v,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Depth",name:"depth",value:t.particulars.depth,onChange:v,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Circumference",name:"circumference",value:t.particulars.circumference,onChange:v,margin:"normal",variant:"outlined"})}),e.jsx(l,{item:!0,xs:12,sm:2,children:e.jsx(N,{fullWidth:!0,label:"Diameters",name:"diameters",value:t.particulars.diameters,onChange:v,margin:"normal",variant:"outlined"})}),e.jsxs(l,{item:!0,xs:12,sm:2,children:[" ",e.jsx(N,{fullWidth:!0,label:"Weight",name:"weight",value:t.particulars.weight,onChange:v,margin:"normal",variant:"outlined"})," "]})," "]})," "]}),e.jsxs(l,{item:!0,xs:12,children:[e.jsx(M,{variant:"h6",sx:{mt:2,mb:1},children:"Upload Images:"}),e.jsxs("div",{...j({className:"dropzone"}),style:{border:"2px dashed #ddd",padding:"20px",textAlign:"center"},children:[e.jsx("input",{...w()}),e.jsx("p",{children:"Drag 'n' drop some files here, or click to select files"})]}),e.jsx("div",{children:t.images.length>0&&e.jsx(M,{variant:"body2",sx:{mt:2},children:t.images.map((s,g)=>e.jsxs("span",{children:[s.name,g<t.images.length-1&&", "]},g))})})]}),e.jsxs(l,{item:!0,xs:12,sx:{mt:2},children:[e.jsx(M,{variant:"h6",sx:{mb:1},children:"Record or Upload Audio:"}),e.jsx(Fr,{onAudioStop:x,onAudioSave:b})]})]})}),e.jsxs(nr,{children:[e.jsx(H,{onClick:o,color:"secondary",variant:"outlined",children:"Cancel"}),e.jsx(H,{onClick:S,color:"primary",variant:"contained",children:"Save Changes"})]})]})]})}const at=()=>{const[a,o]=n.useState(null),[r,i]=n.useState(null),[t,u]=n.useState({type:"",open:!1}),[p,v]=n.useState(!1),[z,x]=n.useState(!1),[b,j]=n.useState([]),[w,S]=n.useState(!0),s=async()=>{S(!0);try{const h=await Se.get("http://localhost:5000/api/artifacts",{withCredentials:!0});j(h.data.data),S(!1)}catch(h){console.error("Error fetching data:",h),S(!1)}};n.useEffect(()=>{s()},[]);const g=(h,f)=>{o(h.currentTarget),i(f)},d=()=>{o(null)},c=async()=>{if(console.log("currentRow._id",r._id),r&&r._id)try{await Se.delete(`http://localhost:5000/api/artifacts/${r._id}`,{withCredentials:!0}),s(),d(),oe.success("Artifact deleted successfully!")}catch(h){console.error("Error deleting artifact:",h),oe.error("Failed to delete artifact. Please try again.")}else oe.error("No artifact selected for deletion.")},y=n.useMemo(()=>[{accessorKey:"action",header:"Actions",enableEditing:!1,size:100,Cell:({row:h})=>e.jsx(Te,{onClick:f=>g(f,h.original),children:e.jsx(jr,{})})},{accessorKey:"_id",header:"Id",enableEditing:!1,size:80},{accessorKey:"name",header:"Name"},{accessorKey:"itemNo",header:"Item No"},{accessorKey:"serialNo",header:"Serial No"},{accessorKey:"description",header:"Description"},{accessorKey:"madeOf",header:"Made Of"},{accessorKey:"age",header:"Age"},{accessorKey:"shelfNo",header:"Shelf No"},{accessorKey:"hallNo",header:"Hall No"}],[]),E=zr({columns:y,data:b,state:{isLoading:w}}),Z=()=>{u({type:"view",open:!0}),d()},L=()=>{r?x(!0):console.error("No row selected for editing"),d()},W=()=>{u({type:"",open:!1})},R=()=>{x(!1)},O=()=>{v(!0)},P=()=>{v(!1)},U=async h=>{try{await Se.put(`http://localhost:5000/api/artifacts/${h._id}`,h),s(),R()}catch(f){console.error("Error saving edited artifact:",f)}};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{sx:{mb:2},children:e.jsx(H,{variant:"contained",color:"primary",onClick:O,children:"Add New Artifact"})}),e.jsx(wr,{table:E}),e.jsxs(yr,{anchorEl:a,open:!!a,onClose:d,children:[e.jsxs($e,{onClick:Z,children:[e.jsx(Sr,{sx:{marginRight:1}}),"View"]}),e.jsxs($e,{onClick:L,children:[e.jsx(Cr,{sx:{marginRight:1}}),"Edit"]}),e.jsxs($e,{onClick:c,sx:{color:"error.main"},children:[e.jsx(Nr,{sx:{marginRight:1}}),"Delete"]})]}),e.jsx(_r,{open:t.open&&t.type==="view",handleClose:W,artifact:r}),e.jsx(Ur,{open:p,handleClose:P,onSave:s}),e.jsx(Zr,{open:z,handleClose:R,artifact:r,onSave:U}),e.jsx(Ze,{})]})};export{at as default};
